<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Freeos Governance: Core Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Freeos Governance
   </div>
   <div id="projectbrief">Governance phase of the Freeos economic system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__core.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Core Functions</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6c2561c61fb830b838f1b73ccc94f829"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga6c2561c61fb830b838f1b73ccc94f829">freedao::version</a> ()</td></tr>
<tr class="separator:ga6c2561c61fb830b838f1b73ccc94f829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51aa050f2ae06745744b56cd04184c96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga51aa050f2ae06745744b56cd04184c96">freedao::check_master_switch</a> ()</td></tr>
<tr class="separator:ga51aa050f2ae06745744b56cd04184c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95d6eab7ab518ca346326e62b86ee230"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga95d6eab7ab518ca346326e62b86ee230">freedao::init</a> (time_point iterations_start, double <a class="el" href="namespacefreedao.html#ad14aae796d5610084947cfaf0f2ad7b0">issuance_rate</a>, double mint_fee_percent_freeos, double <a class="el" href="namespacefreedao.html#a3e17e5418923f720472eca0388bc00e1">mint_fee_percent_xpr</a>, double <a class="el" href="namespacefreedao.html#ac9ad0060eb19eb391fa5fcff24aa372d">mint_fee_percent_xusdc</a>, double <a class="el" href="namespacefreedao.html#a6ddd8c20a26ef772ca3d3591e43aaed5">locking_threshold</a>, bool <a class="el" href="namespacefreedao.html#a0aecf9c0e4c3d240a5c71024fbf6827f">pool</a>)</td></tr>
<tr class="separator:ga95d6eab7ab518ca346326e62b86ee230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8848c723d286f37e8ca7930753bab5f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga8848c723d286f37e8ca7930753bab5f0">freedao::is_action_period</a> (string action)</td></tr>
<tr class="separator:ga8848c723d286f37e8ca7930753bab5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga227e0705813c5a3ab9dfcdc438d667b2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga227e0705813c5a3ab9dfcdc438d667b2">freedao::current_iteration</a> ()</td></tr>
<tr class="separator:ga227e0705813c5a3ab9dfcdc438d667b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga707783d4644c3b79cedf5e6f037ebbd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga707783d4644c3b79cedf5e6f037ebbd4">freedao::tick</a> ()</td></tr>
<tr class="separator:ga707783d4644c3b79cedf5e6f037ebbd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1edb9084f1478955ad9cc01d63cc4593"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga1edb9084f1478955ad9cc01d63cc4593">freedao::get_locked_proportion</a> ()</td></tr>
<tr class="separator:ga1edb9084f1478955ad9cc01d63cc4593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f5855a1cb0a734f257cbad3f59ba1f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga7f5855a1cb0a734f257cbad3f59ba1f2">freedao::update_unlock_percentage</a> ()</td></tr>
<tr class="separator:ga7f5855a1cb0a734f257cbad3f59ba1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63b131def8c2fe0c10e8617af5377588"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#ga63b131def8c2fe0c10e8617af5377588">freedao::trigger_new_iteration</a> (uint32_t new_iteration)</td></tr>
<tr class="separator:ga63b131def8c2fe0c10e8617af5377588"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >These Actions and functions are related to core functionality. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga51aa050f2ae06745744b56cd04184c96" name="ga51aa050f2ae06745744b56cd04184c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51aa050f2ae06745744b56cd04184c96">&#9670;&#160;</a></span>check_master_switch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool freedao::freeosgov::check_master_switch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function checks if the master switch (parameter: masterswitch) is on (set to "1") or off. The masterswitch parameter is checked by all user-initiated actions. In effect this can be used to prohibit user activity in the event of a serious problem.</p>
<dl class="section return"><dt>Returns</dt><dd>A boolean value. </dd></dl>

</div>
</div>
<a id="ga227e0705813c5a3ab9dfcdc438d667b2" name="ga227e0705813c5a3ab9dfcdc438d667b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga227e0705813c5a3ab9dfcdc438d667b2">&#9670;&#160;</a></span>current_iteration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t freedao::freeosgov::current_iteration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The function returns the current iteration number</p>
<dl class="section return"><dt>Returns</dt><dd>The current iteration number. </dd></dl>

</div>
</div>
<a id="ga1edb9084f1478955ad9cc01d63cc4593" name="ga1edb9084f1478955ad9cc01d63cc4593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1edb9084f1478955ad9cc01d63cc4593">&#9670;&#160;</a></span>get_locked_proportion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double freedao::freeosgov::get_locked_proportion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function returns the double proportion of the total supply that should be locked, based on the current and target exchange rates in the exchangerate table. For example, a target rate of $2 and a current rate of $1.5 returns a lock proportion = 0.25. The proportion is capped at 0.9</p>
<dl class="section return"><dt>Returns</dt><dd>The proportion of the amount of tokens that will be locked. </dd></dl>

</div>
</div>
<a id="ga95d6eab7ab518ca346326e62b86ee230" name="ga95d6eab7ab518ca346326e62b86ee230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95d6eab7ab518ca346326e62b86ee230">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freedao::freeosgov::init </td>
          <td>(</td>
          <td class="paramtype">time_point&#160;</td>
          <td class="paramname"><em>iterations_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>issuance_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mint_fee_percent_freeos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mint_fee_percent_xpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mint_fee_percent_xusdc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>locking_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Action initializes the system by creating the system record, the reward record for iteration 0, and the survey, vote and ratify records if they don't already exist</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iterations_start</td><td>the time at which the first iteration will start </td></tr>
    <tr><td class="paramname">issuance_rate</td><td>the amount of points to be issued per iteration </td></tr>
    <tr><td class="paramname">mint_fee_percent_freeos</td><td>the percentage of the issuance that goes to the freeos.io team </td></tr>
    <tr><td class="paramname">mint_fee_percent_xpr</td><td>the percentage of the issuance that goes to the XPR pool </td></tr>
    <tr><td class="paramname">mint_fee_percent_xusdc</td><td>The percentage of the issuance that goes to the XUSDC pool. </td></tr>
    <tr><td class="paramname">locking_threshold</td><td>the minimum percentage of a user's total points that must be locked in order to participate in the vote </td></tr>
    <tr><td class="paramname">pool</td><td>true if the rewards are to be distributed to the pool, false if they are to be burned </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8848c723d286f37e8ca7930753bab5f0" name="ga8848c723d286f37e8ca7930753bab5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8848c723d286f37e8ca7930753bab5f0">&#9670;&#160;</a></span>is_action_period()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool freedao::freeosgov::is_action_period </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >If the current time is between the start and end of the action period, return true</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action</td><td>the name of the activity, i.e. "survey", "vote" or "ratify"</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A boolean value indicating whether the activity period is current </dd></dl>

</div>
</div>
<a id="ga707783d4644c3b79cedf5e6f037ebbd4" name="ga707783d4644c3b79cedf5e6f037ebbd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga707783d4644c3b79cedf5e6f037ebbd4">&#9670;&#160;</a></span>tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freedao::freeosgov::tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The <code><a class="el" href="group__core.html#ga707783d4644c3b79cedf5e6f037ebbd4">tick()</a></code> function is called every time a user runs an action. It checks that the system is operational (i.e. that the <code>masterswitch</code> parameter is set to <code>1</code>). If the iteration has changed, the <a class="el" href="group__core.html#ga63b131def8c2fe0c10e8617af5377588">trigger_new_iteration()</a> function is called to perform app housekeeping operations </p>

</div>
</div>
<a id="ga63b131def8c2fe0c10e8617af5377588" name="ga63b131def8c2fe0c10e8617af5377588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63b131def8c2fe0c10e8617af5377588">&#9670;&#160;</a></span>trigger_new_iteration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freedao::freeosgov::trigger_new_iteration </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>new_iteration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function performs various housekeeping activities at the switchover to a new iteration. It updates the system record with the new iteration, updates the locking threshold, calculates the issuance for the iteration, updates the rewards record, updates the exchange rate record, deletes old rewards records, and resets the survey, vote and ratify records</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_iteration</td><td>the iteration number of the new iteration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7f5855a1cb0a734f257cbad3f59ba1f2" name="ga7f5855a1cb0a734f257cbad3f59ba1f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7f5855a1cb0a734f257cbad3f59ba1f2">&#9670;&#160;</a></span>update_unlock_percentage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freedao::freeosgov::update_unlock_percentage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >If the exchange rate is favourable, i.e current rate &gt; target rate (good times), increase the unlock percentage. If the exchange rate is unfavourable (bad times), decrease the unlock percentage.</p>
<p >The rate of unlock percentage increases in good times according to a Fibonacci sequence, i.e. 1%, 2%, 3%, 5%, etc The unlock percentage is capped at 21%.</p>
<p >Going into 'bad times' resets the unlock percentage to 0.</p>
<p >"failsafe" unlocking applies in bad times. Every so many weeks, users can unlock 15%. The interval is determined by parameter: failsafefreq </p>

</div>
</div>
<a id="ga6c2561c61fb830b838f1b73ccc94f829" name="ga6c2561c61fb830b838f1b73ccc94f829"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c2561c61fb830b838f1b73ccc94f829">&#9670;&#160;</a></span>version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freedao::freeosgov::version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >version action.</p>
<p >Prints the version of this contract.</p>
<p >Action prints out the version of the contract, the accounts that are used for the freeos tokens, freebi tokens, and the freeos divide account, and the current iteration </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
